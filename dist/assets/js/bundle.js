!function(){"use strict";console.log("index.js is loading!!");class t{constructor(t){this.form=t,this.confirmCheckbox=this.form.querySelector('[name="agree"]'),this.inputElement=this.form.querySelectorAll("input, textarea"),this.confirmButton=this.form.querySelector(".js-confirm-button"),this.fixButton=this.form.querySelector(".js-fix-button"),this.submitButton=this.form.querySelector(".js-submit-button")}init(){null!=document.URL.match(/contact\//)&&this.checkConfirmIsDisabled(this.confirmCheckbox)}handleEvent(){const t=null!=document.URL.match(/contact\//),e=null!=document.URL.match(/contact-confirm\//);t&&(this.handleSubmitDisabled(this.confirmCheckbox),this.handleClickConfirmButton(this.confirmButton)),e&&(this.setValueOnConfirmPage(),this.handleBackToContactPage(this.fixButton),this.handleSubmitFormData(this.submitButton))}handleSubmitDisabled(t){t.addEventListener("click",(()=>{this.checkConfirmIsDisabled(this.confirmCheckbox)}))}handleClickConfirmButton(t){t.addEventListener("click",(()=>{this.confirmButtonEvent(this.form,this.inputElement)}))}handleBackToContactPage(t){t.addEventListener("click",(()=>{this.backToContactPage()}))}handleSubmitFormData(t){t.addEventListener("click",(()=>{this.submitFormData(this.form)}))}checkConfirmIsDisabled(t){t.checked?(this.confirmButton.setAttribute("aria-disabled",!1),this.confirmButton.disabled=!1):(this.confirmButton.setAttribute("aria-disabled",!0),this.confirmButton.disabled=!0)}confirmButtonEvent(t,e){this.displayValidation(e),t.checkValidity()&&(this.setFormToStorage(t),this.moveConfirmPage())}setFormToStorage(){const t=[...new FormData(this.form).entries()].map((t=>({name:t[0],value:t[1]}))),e=JSON.stringify(t);sessionStorage.setItem("form",e)}displayValidation(t){t.forEach((t=>{const e=t.getAttribute("name"),o=t.getAttribute("title"),i=this.form.querySelectorAll(`[data-validation="${e}"]`),n=null!==i&&t.hasAttribute("title"),a=t.validity.valid;t.setAttribute("data-is-valid",a),n&&(i[0].innerHTML=a?"":o)}))}moveConfirmPage(){const t=document.URL.replace(/contact\//,"contact-confirm");location.href=t}backToContactPage(){return window.history.back(-1),!1}setValueOnConfirmPage(){sessionStorage.getItem("form")&&JSON.parse(sessionStorage.getItem("form")).forEach(((t,e)=>{const o=this.form.querySelectorAll(".js-input-value"),i=o.length;0<=e&&e<i&&(o[e].innerHTML=t.value)}))}submitFormData(){if(sessionStorage.getItem("form")){const t=JSON.parse(sessionStorage.getItem("form")),e=new FormData;t.map((t=>{e.append(t.name,t.value)}));const o=document.URL.replace(/contact-confirm\//,"contact-thanks");fetch("../assets/api/contact.php",{method:"POST",body:e}).then((t=>t.text())).then((()=>{sessionStorage.removeItem("form"),location.href=o})).catch((t=>{console.error(t)}))}}}document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelector("#contact-form");if(null!=e){const o=new t(e);o.init(),o.handleEvent()}}))}();
//# sourceMappingURL=bundle.js.map